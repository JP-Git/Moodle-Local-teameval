define ("local_teameval/question",["jquery","core/fragment","core/notification","core/templates","core/ajax"],function(a,b,c,d,e){function f(a,b,c,d,e,f,g){this.teameval=b;this.questionID=g;this.container=a;this.contextid=c;this.optional=f}f.prototype.submissionView=function(){var a=this.submissionTemplate();if(a){var b=this.submissionContext(),c=d.render(a,b);return c.done(function(a,b){d.replaceNodeContents(this.container,a,b)}.bind(this))}};f.prototype.editingView=function(){var a=this.editingTemplate();if(a){var b=this.editingContext(),c=d.render(a,b);c.done(function(a,b){d.replaceNodeContents(this.container,a,b)}.bind(this));return c}};f.prototype.save=function(){};f.prototype.delete=function(){if(this.questionID&&this.pluginName){var b=e.call([{methodname:"teamevalquestion_"+this.pluginName+"_delete_question",args:{teamevalid:this.teameval,id:this.questionID}}]);return b[0]}return a.Deferred().resolve()};f.prototype.submit=function(){};f.prototype.reset=function(){this.resetSubmissionContext();return this.submissionView()};f.prototype.submissionTemplate=function(){if(this.pluginName){return"teamevalquestion_"+this.pluginName+"/submission_view"}return null};f.prototype.submissionContext=function(){return{}};f.prototype.editingTemplate=function(){if(this.pluginName){return"teamevalquestion_"+this.pluginName+"/editing_view"}return null};f.prototype.editingContext=function(){return{}};f.prototype.resetSubmissionContext=function(){};f.prototype.editForm=function(a,e,f){var g={form:a,jsonformdata:JSON.stringify(e),customdata:JSON.stringify(f)},h=b.loadFragment("local_teameval","ajaxform",this.contextid,g);h.done(function(a,b){d.replaceNodeContents(this.container,a,b)}.bind(this));h.fail(c.exception);return h};f.prototype.submitForm=function(b,d,f){var g=this.validateData(b).then(function(){f.formdata=a(b).serialize();var c=e.call([{methodname:d,args:f}]);return c[0]}.bind(this));g.fail(function(a){if(a&&a.errorcode){c.exception(a)}}.bind(this));return g};f.prototype.saveForm=function(b,c,d,e){var f={ordinalName:"ordinal",questionIDName:"id",methodname:"teamevalquestion_"+this.pluginName+"_update_question",args:{teamevalid:this.teameval},resolveWithID:!0},g=a.extend({},f,d);a(b).find("[name="+g.ordinalName+"]").val(c);if(this.questionID){a(b).find("[name="+g.questionIDName+"]").val(this.questionID)}return this.submitForm(b,g.methodname,g.args).then(function(a){this.questionID=a.id;if(e){e(a)}return g.resolveWithID?a.id:a}.bind(this))};f.prototype.validateData=function(){return a.Deferred().resolve().promise()};return f});
//# sourceMappingURL=question.min.js.map
